<%- include('partials/header') %>
<div class="container">
  <h1 style="color: #f1f5f9; margin-bottom: 0.5rem;">API Documentation</h1>
  <p class="text-muted mb-2">Dokumentasi lengkap REST API BTS Indonesia</p>

  <div class="card mb-2">
    <h3 style="color: #f59e0b;">Authentication</h3>
    <p class="text-sm text-muted mt-1">Semua API endpoint memerlukan API Key. Kirim API key via header atau query parameter:</p>
    <div class="code-block mt-1">Header: X-API-Key: YOUR_API_KEY
Query:  ?api_key=YOUR_API_KEY</div>
  </div>

  <div class="card mb-2">
    <h3 style="color: #60a5fa;">Base URL</h3>
    <div class="code-block mt-1">https://YOUR_DOMAIN/api/v1/</div>
  </div>

  <h2 style="color: #f1f5f9; margin: 2rem 0 1rem;">Endpoints</h2>

  <div class="card mb-2">
    <h3><span class="badge badge-active">GET</span> /api/v1/msisdn/:msisdn</h3>
    <p class="text-muted text-sm mt-1">Lookup data MSISDN - mendapatkan informasi Cell ID, LAC, MCC, MNC, IMEI, IMSI, ICCID, lokasi tower BTS dan koordinat.</p>
    <h4 style="margin-top: 1rem; color: #94a3b8;">Request Example:</h4>
    <div class="code-block mt-1">curl -H "X-API-Key: YOUR_API_KEY" \
  "https://YOUR_DOMAIN/api/v1/msisdn/08123456789"</div>
    <h4 style="margin-top: 1rem; color: #94a3b8;">Response:</h4>
    <div class="code-block mt-1">{
  "success": true,
  "data": {
    "msisdn": "08123456789",
    "msisdn_international": "+628123456789",
    "operator": {
      "name": "PT Telekomunikasi Selular",
      "brand": "Telkomsel",
      "mcc": "510",
      "mnc": "10"
    },
    "device": {
      "imei": "352456789012345",
      "imsi": "510101234567890",
      "iccid": "89621012345678901234"
    },
    "serving_cell": {
      "cell_id": 12345,
      "lac": 54321,
      "mcc": "510",
      "mnc": "10",
      "tower_type": "4G",
      "band": "LTE 1800",
      "latitude": -6.2088,
      "longitude": 106.8456,
      "azimuth": 120,
      "height_m": 35,
      "power_dbm": 43
    },
    "location": {
      "province": "DKI Jakarta",
      "city": "Kota Jakarta Pusat",
      "address": "Tower Telkomsel - Kota Jakarta Pusat"
    },
    "neighboring_cells": [...]
  },
  "meta": {
    "response_time_ms": 45,
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}</div>
  </div>

  <div class="card mb-2">
    <h3><span class="badge badge-active">GET</span> /api/v1/towers</h3>
    <p class="text-muted text-sm mt-1">Daftar BTS towers dengan filter dan pagination.</p>
    <h4 style="margin-top: 1rem; color: #94a3b8;">Query Parameters:</h4>
    <table>
      <tr><td><code>province</code></td><td>Filter by province code (e.g., 31, 32)</td></tr>
      <tr><td><code>city</code></td><td>Filter by city code</td></tr>
      <tr><td><code>operator</code></td><td>Filter by MNC (10=Telkomsel, 01=Indosat, 11=XL, 89=Tri, 09=Smartfren)</td></tr>
      <tr><td><code>type</code></td><td>Filter by tower type (2G, 3G, 4G, 5G)</td></tr>
      <tr><td><code>page</code></td><td>Page number (default: 1)</td></tr>
      <tr><td><code>limit</code></td><td>Results per page (default: 50, max: 100)</td></tr>
    </table>
    <div class="code-block mt-1">curl -H "X-API-Key: YOUR_API_KEY" \
  "https://YOUR_DOMAIN/api/v1/towers?province=31&operator=10&type=4G"</div>
  </div>

  <div class="card mb-2">
    <h3><span class="badge badge-active">GET</span> /api/v1/towers/:id</h3>
    <p class="text-muted text-sm mt-1">Detail tower BTS by ID.</p>
    <div class="code-block mt-1">curl -H "X-API-Key: YOUR_API_KEY" \
  "https://YOUR_DOMAIN/api/v1/towers/123"</div>
  </div>

  <div class="card mb-2">
    <h3><span class="badge badge-active">GET</span> /api/v1/provinces</h3>
    <p class="text-muted text-sm mt-1">Daftar seluruh provinsi Indonesia.</p>
    <div class="code-block mt-1">curl -H "X-API-Key: YOUR_API_KEY" \
  "https://YOUR_DOMAIN/api/v1/provinces"</div>
  </div>

  <div class="card mb-2">
    <h3><span class="badge badge-active">GET</span> /api/v1/cities</h3>
    <p class="text-muted text-sm mt-1">Daftar kota/kabupaten. Optional filter by province.</p>
    <div class="code-block mt-1">curl -H "X-API-Key: YOUR_API_KEY" \
  "https://YOUR_DOMAIN/api/v1/cities?province=32"</div>
  </div>

  <div class="card mb-2">
    <h3><span class="badge badge-active">GET</span> /api/v1/operators</h3>
    <p class="text-muted text-sm mt-1">Daftar operator telekomunikasi Indonesia.</p>
    <div class="code-block mt-1">curl -H "X-API-Key: YOUR_API_KEY" \
  "https://YOUR_DOMAIN/api/v1/operators"</div>
  </div>

  <div class="card mb-2">
    <h3><span class="badge badge-active">GET</span> /api/v1/stats</h3>
    <p class="text-muted text-sm mt-1">Statistik database BTS.</p>
    <div class="code-block mt-1">curl -H "X-API-Key: YOUR_API_KEY" \
  "https://YOUR_DOMAIN/api/v1/stats"</div>
  </div>

  <div class="card mb-2">
    <h3 style="color: #ef4444;">Error Codes</h3>
    <table>
      <tr><td><code>401</code></td><td>API key tidak valid atau tidak disertakan</td></tr>
      <tr><td><code>403</code></td><td>Akun dinonaktifkan</td></tr>
      <tr><td><code>404</code></td><td>Data tidak ditemukan</td></tr>
      <tr><td><code>429</code></td><td>Batas request harian terlampaui</td></tr>
      <tr><td><code>500</code></td><td>Server error</td></tr>
    </table>
  </div>

  <div class="card mb-2">
    <h3 style="color: #22c55e;">Rate Limits</h3>
    <table>
      <tr><td>Free Plan</td><td>100 requests/hari</td></tr>
      <tr><td>Premium Plan</td><td>1,000 requests/hari</td></tr>
      <tr><td>VIP Plan</td><td>10,000 requests/hari</td></tr>
    </table>
  </div>

  <div class="card">
    <h3 style="color: #f59e0b;">CLI Usage Example</h3>
    <p class="text-muted text-sm mt-1">Contoh penggunaan API via terminal/command line:</p>
    <div class="code-block mt-1"># MSISDN Lookup
curl -s -H "X-API-Key: bts_YOUR_KEY_HERE" \
  "https://YOUR_DOMAIN/api/v1/msisdn/08123456789" | python3 -m json.tool

# List towers di Jakarta
curl -s -H "X-API-Key: bts_YOUR_KEY_HERE" \
  "https://YOUR_DOMAIN/api/v1/towers?province=31" | python3 -m json.tool

# Get all provinces
curl -s -H "X-API-Key: bts_YOUR_KEY_HERE" \
  "https://YOUR_DOMAIN/api/v1/provinces" | python3 -m json.tool

# Get statistics
curl -s -H "X-API-Key: bts_YOUR_KEY_HERE" \
  "https://YOUR_DOMAIN/api/v1/stats" | python3 -m json.tool</div>
  </div>
</div>
<%- include('partials/footer') %>
